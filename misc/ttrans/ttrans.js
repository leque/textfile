const ttrans = (text, rule) => {
    let input = text.normalize('NFC').toLowerCase();
    const result = [];
    const [re, map] = compileRule(rule);
    while (true) {
        const m = input.match(re);
        if (m) {
            const [_m, before, match, after] = m;
            result.push(before);
            const r = map.get(match);
            if (r) {
                const {replacement, next} = r;
                result.push(replacement);
                input = next ? (next + after) : after;
            } else {
                result.push(match);
                input = after;
            }
        } else {
            result.push(input);
            break;
        }
    }
    return result.join('');
};

const compileRule = (rule) => {
    const alts = rule
          .sort((a, b) => -compareInt(a.pattern.length, b.pattern.length))
          .map(r => r.pattern).join("|");
    const re = new RegExp(`(.*?)(${alts})(.*)`, "su");
    const map = new Map(rule.map(({pattern, replacement, next}) =>
        [pattern, {replacement, next}]));
    return [re, map];
};

const compareInt = (x, y) =>
      x > y ? 1
      : x < y ? -1
      : 0;

const jaHepburnRule =
[
  {"pattern":"a","replacement":"ア"},
  {"pattern":"ā","replacement":"アー"},
  {"pattern":"i","replacement":"イ"},
  {"pattern":"ī","replacement":"イー"},
  {"pattern":"u","replacement":"ウ"},
  {"pattern":"ū","replacement":"ウー"},
  {"pattern":"e","replacement":"エ"},
  {"pattern":"ē","replacement":"エー"},
  {"pattern":"o","replacement":"オ"},
  {"pattern":"ō","replacement":"オー"},
  {"pattern":"ka","replacement":"カ"},
  {"pattern":"kā","replacement":"カー"},
  {"pattern":"ki","replacement":"キ"},
  {"pattern":"kī","replacement":"キー"},
  {"pattern":"ku","replacement":"ク"},
  {"pattern":"kū","replacement":"クー"},
  {"pattern":"ke","replacement":"ケ"},
  {"pattern":"kē","replacement":"ケー"},
  {"pattern":"ko","replacement":"コ"},
  {"pattern":"kō","replacement":"コー"},
  {"pattern":"sa","replacement":"サ"},
  {"pattern":"sā","replacement":"サー"},
  {"pattern":"shi","replacement":"シ"},
  {"pattern":"shī","replacement":"シー"},
  {"pattern":"su","replacement":"ス"},
  {"pattern":"sū","replacement":"スー"},
  {"pattern":"se","replacement":"セ"},
  {"pattern":"sē","replacement":"セー"},
  {"pattern":"so","replacement":"ソ"},
  {"pattern":"sō","replacement":"ソー"},
  {"pattern":"ta","replacement":"タ"},
  {"pattern":"tā","replacement":"ター"},
  {"pattern":"chi","replacement":"チ"},
  {"pattern":"chī","replacement":"チー"},
  {"pattern":"tsu","replacement":"ツ"},
  {"pattern":"tsū","replacement":"ツー"},
  {"pattern":"te","replacement":"テ"},
  {"pattern":"tē","replacement":"テー"},
  {"pattern":"to","replacement":"ト"},
  {"pattern":"tō","replacement":"トー"},
  {"pattern":"na","replacement":"ナ"},
  {"pattern":"nā","replacement":"ナー"},
  {"pattern":"ni","replacement":"ニ"},
  {"pattern":"nī","replacement":"ニー"},
  {"pattern":"nu","replacement":"ヌ"},
  {"pattern":"nū","replacement":"ヌー"},
  {"pattern":"ne","replacement":"ネ"},
  {"pattern":"nē","replacement":"ネー"},
  {"pattern":"no","replacement":"ノ"},
  {"pattern":"nō","replacement":"ノー"},
  {"pattern":"ha","replacement":"ハ"},
  {"pattern":"hā","replacement":"ハー"},
  {"pattern":"hi","replacement":"ヒ"},
  {"pattern":"hī","replacement":"ヒー"},
  {"pattern":"fu","replacement":"フ"},
  {"pattern":"fū","replacement":"フー"},
  {"pattern":"he","replacement":"ヘ"},
  {"pattern":"hē","replacement":"ヘー"},
  {"pattern":"ho","replacement":"ホ"},
  {"pattern":"hō","replacement":"ホー"},
  {"pattern":"ma","replacement":"マ"},
  {"pattern":"mā","replacement":"マー"},
  {"pattern":"mi","replacement":"ミ"},
  {"pattern":"mī","replacement":"ミー"},
  {"pattern":"mu","replacement":"ム"},
  {"pattern":"mū","replacement":"ムー"},
  {"pattern":"me","replacement":"メ"},
  {"pattern":"mē","replacement":"メー"},
  {"pattern":"mo","replacement":"モ"},
  {"pattern":"mō","replacement":"モー"},
  {"pattern":"ya","replacement":"ヤ"},
  {"pattern":"yā","replacement":"ヤー"},
  {"pattern":"yu","replacement":"ユ"},
  {"pattern":"yū","replacement":"ユー"},
  {"pattern":"yo","replacement":"ヨ"},
  {"pattern":"yō","replacement":"ヨー"},
  {"pattern":"ra","replacement":"ラ"},
  {"pattern":"rā","replacement":"ラー"},
  {"pattern":"ri","replacement":"リ"},
  {"pattern":"rī","replacement":"リー"},
  {"pattern":"ru","replacement":"ル"},
  {"pattern":"rū","replacement":"ルー"},
  {"pattern":"re","replacement":"レ"},
  {"pattern":"rē","replacement":"レー"},
  {"pattern":"ro","replacement":"ロ"},
  {"pattern":"rō","replacement":"ロー"},
  {"pattern":"wa","replacement":"ワ"},
  {"pattern":"wā","replacement":"ワー"},
  {"pattern":"wo","replacement":"ヲ"},
  {"pattern":"wō","replacement":"ヲー"},
  {"pattern":"kya","replacement":"キャ"},
  {"pattern":"kyā","replacement":"キャー"},
  {"pattern":"kyu","replacement":"キュ"},
  {"pattern":"kyū","replacement":"キュー"},
  {"pattern":"kye","replacement":"キェ"},
  {"pattern":"kyē","replacement":"キェー"},
  {"pattern":"kyo","replacement":"キョ"},
  {"pattern":"kyō","replacement":"キョー"},
  {"pattern":"gya","replacement":"ギャ"},
  {"pattern":"gyā","replacement":"ギャー"},
  {"pattern":"gyu","replacement":"ギュ"},
  {"pattern":"gyū","replacement":"ギュー"},
  {"pattern":"gye","replacement":"ギェ"},
  {"pattern":"gyē","replacement":"ギェー"},
  {"pattern":"gyo","replacement":"ギョ"},
  {"pattern":"gyō","replacement":"ギョー"},
  {"pattern":"sha","replacement":"シャ"},
  {"pattern":"shā","replacement":"シャー"},
  {"pattern":"shu","replacement":"シュ"},
  {"pattern":"shū","replacement":"シュー"},
  {"pattern":"she","replacement":"シェ"},
  {"pattern":"shē","replacement":"シェー"},
  {"pattern":"sho","replacement":"ショ"},
  {"pattern":"shō","replacement":"ショー"},
  {"pattern":"ja","replacement":"ジャ"},
  {"pattern":"jā","replacement":"ジャー"},
  {"pattern":"ju","replacement":"ジュ"},
  {"pattern":"jū","replacement":"ジュー"},
  {"pattern":"je","replacement":"ジェ"},
  {"pattern":"jē","replacement":"ジェー"},
  {"pattern":"jo","replacement":"ジョ"},
  {"pattern":"jō","replacement":"ジョー"},
  {"pattern":"cha","replacement":"チャ"},
  {"pattern":"chā","replacement":"チャー"},
  {"pattern":"chu","replacement":"チュ"},
  {"pattern":"chū","replacement":"チュー"},
  {"pattern":"che","replacement":"チェ"},
  {"pattern":"chē","replacement":"チェー"},
  {"pattern":"cho","replacement":"チョ"},
  {"pattern":"chō","replacement":"チョー"},
  {"pattern":"bya","replacement":"ビャ"},
  {"pattern":"byā","replacement":"ビャー"},
  {"pattern":"byu","replacement":"ビュ"},
  {"pattern":"byū","replacement":"ビュー"},
  {"pattern":"bye","replacement":"ビェ"},
  {"pattern":"byē","replacement":"ビェー"},
  {"pattern":"byo","replacement":"ビョ"},
  {"pattern":"byō","replacement":"ビョー"},
  {"pattern":"pya","replacement":"ピャ"},
  {"pattern":"pyā","replacement":"ピャー"},
  {"pattern":"pyu","replacement":"ピュ"},
  {"pattern":"pyū","replacement":"ピュー"},
  {"pattern":"pye","replacement":"ピェ"},
  {"pattern":"pyē","replacement":"ピェー"},
  {"pattern":"pyo","replacement":"ピョ"},
  {"pattern":"pyō","replacement":"ピョー"},
  {"pattern":"mya","replacement":"ミャ"},
  {"pattern":"myā","replacement":"ミャー"},
  {"pattern":"myu","replacement":"ミュ"},
  {"pattern":"myū","replacement":"ミュー"},
  {"pattern":"mye","replacement":"ミェ"},
  {"pattern":"myē","replacement":"ミェー"},
  {"pattern":"myo","replacement":"ミョ"},
  {"pattern":"myō","replacement":"ミョー"},
  {"pattern":"rya","replacement":"リャ"},
  {"pattern":"ryā","replacement":"リャー"},
  {"pattern":"ryu","replacement":"リュ"},
  {"pattern":"ryū","replacement":"リュー"},
  {"pattern":"rye","replacement":"リェ"},
  {"pattern":"ryē","replacement":"リェー"},
  {"pattern":"ryo","replacement":"リョ"},
  {"pattern":"ryō","replacement":"リョー"},
  {"pattern":"ga","replacement":"ガ"},
  {"pattern":"gā","replacement":"ガー"},
  {"pattern":"gi","replacement":"ギ"},
  {"pattern":"gī","replacement":"ギー"},
  {"pattern":"gu","replacement":"グ"},
  {"pattern":"gū","replacement":"グー"},
  {"pattern":"ge","replacement":"ゲ"},
  {"pattern":"gē","replacement":"ゲー"},
  {"pattern":"go","replacement":"ゴ"},
  {"pattern":"gō","replacement":"ゴー"},
  {"pattern":"za","replacement":"ザ"},
  {"pattern":"zā","replacement":"ザー"},
  {"pattern":"ji","replacement":"ジ"},
  {"pattern":"jī","replacement":"ジー"},
  {"pattern":"zu","replacement":"ズ"},
  {"pattern":"zū","replacement":"ズー"},
  {"pattern":"ze","replacement":"ゼ"},
  {"pattern":"zē","replacement":"ゼー"},
  {"pattern":"zo","replacement":"ゾ"},
  {"pattern":"zō","replacement":"ゾー"},
  {"pattern":"da","replacement":"ダ"},
  {"pattern":"dā","replacement":"ダー"},
  {"pattern":"de","replacement":"デ"},
  {"pattern":"dē","replacement":"デー"},
  {"pattern":"do","replacement":"ド"},
  {"pattern":"dō","replacement":"ドー"},
  {"pattern":"ba","replacement":"バ"},
  {"pattern":"bā","replacement":"バー"},
  {"pattern":"bi","replacement":"ビ"},
  {"pattern":"bī","replacement":"ビー"},
  {"pattern":"bu","replacement":"ブ"},
  {"pattern":"bū","replacement":"ブー"},
  {"pattern":"be","replacement":"ベ"},
  {"pattern":"bē","replacement":"ベー"},
  {"pattern":"bo","replacement":"ボ"},
  {"pattern":"bō","replacement":"ボー"},
  {"pattern":"pa","replacement":"パ"},
  {"pattern":"pā","replacement":"パー"},
  {"pattern":"pi","replacement":"ピ"},
  {"pattern":"pī","replacement":"ピー"},
  {"pattern":"pu","replacement":"プ"},
  {"pattern":"pū","replacement":"プー"},
  {"pattern":"pe","replacement":"ペ"},
  {"pattern":"pē","replacement":"ペー"},
  {"pattern":"po","replacement":"ポ"},
  {"pattern":"pō","replacement":"ポー"},
  {"pattern":"kk","replacement":"ッ","next":"k"},
  {"pattern":"ss","replacement":"ッ","next":"s"},
  {"pattern":"tt","replacement":"ッ","next":"t"},
  {"pattern":"hh","replacement":"ッ","next":"h"},
  {"pattern":"ff","replacement":"ッ","next":"f"},
  {"pattern":"mm","replacement":"ッ","next":"m"},
  {"pattern":"yy","replacement":"ッ","next":"y"},
  {"pattern":"rr","replacement":"ッ","next":"r"},
  {"pattern":"gg","replacement":"ッ","next":"g"},
  {"pattern":"zz","replacement":"ッ","next":"z"},
  {"pattern":"jj","replacement":"ッ","next":"j"},
  {"pattern":"dd","replacement":"ッ","next":"d"},
  {"pattern":"bb","replacement":"ッ","next":"b"},
  {"pattern":"pp","replacement":"ッ","next":"p"},
  {"pattern":"nk","replacement":"ン","next":"k"},
  {"pattern":"ns","replacement":"ン","next":"s"},
  {"pattern":"nt","replacement":"ン","next":"t"},
  {"pattern":"nn","replacement":"ン","next":"n"},
  {"pattern":"nh","replacement":"ン","next":"h"},
  {"pattern":"nf","replacement":"ン","next":"f"},
  {"pattern":"nm","replacement":"ン","next":"m"},
  {"pattern":"ny","replacement":"ン","next":"y"},
  {"pattern":"nr","replacement":"ン","next":"r"},
  {"pattern":"ng","replacement":"ン","next":"g"},
  {"pattern":"nz","replacement":"ン","next":"z"},
  {"pattern":"nj","replacement":"ン","next":"j"},
  {"pattern":"nd","replacement":"ン","next":"d"},
  {"pattern":"nb","replacement":"ン","next":"b"},
  {"pattern":"np","replacement":"ン","next":"p"},
  {"pattern":"n'a","replacement":"ン","next":"a"},
  {"pattern":"n'i","replacement":"ン","next":"i"},
  {"pattern":"n'u","replacement":"ン","next":"u"},
  {"pattern":"n'e","replacement":"ン","next":"e"},
  {"pattern":"n'o","replacement":"ン","next":"o"},
  {"pattern":"tch","replacement":"ッ","next":"ch"}
]
;
const jaKunreiRule =
[
  {"pattern":"a","replacement":"ア"},
  {"pattern":"ā","replacement":"アー"},
  {"pattern":"i","replacement":"イ"},
  {"pattern":"ī","replacement":"イー"},
  {"pattern":"u","replacement":"ウ"},
  {"pattern":"ū","replacement":"ウー"},
  {"pattern":"e","replacement":"エ"},
  {"pattern":"ē","replacement":"エー"},
  {"pattern":"o","replacement":"オ"},
  {"pattern":"ō","replacement":"オー"},
  {"pattern":"ka","replacement":"カ"},
  {"pattern":"kā","replacement":"カー"},
  {"pattern":"ki","replacement":"キ"},
  {"pattern":"kī","replacement":"キー"},
  {"pattern":"ku","replacement":"ク"},
  {"pattern":"kū","replacement":"クー"},
  {"pattern":"ke","replacement":"ケ"},
  {"pattern":"kē","replacement":"ケー"},
  {"pattern":"ko","replacement":"コ"},
  {"pattern":"kō","replacement":"コー"},
  {"pattern":"sa","replacement":"サ"},
  {"pattern":"sā","replacement":"サー"},
  {"pattern":"si","replacement":"シ"},
  {"pattern":"sī","replacement":"シー"},
  {"pattern":"su","replacement":"ス"},
  {"pattern":"sū","replacement":"スー"},
  {"pattern":"se","replacement":"セ"},
  {"pattern":"sē","replacement":"セー"},
  {"pattern":"so","replacement":"ソ"},
  {"pattern":"sō","replacement":"ソー"},
  {"pattern":"ta","replacement":"タ"},
  {"pattern":"tā","replacement":"ター"},
  {"pattern":"ti","replacement":"チ"},
  {"pattern":"tī","replacement":"チー"},
  {"pattern":"tu","replacement":"ツ"},
  {"pattern":"tū","replacement":"ツー"},
  {"pattern":"te","replacement":"テ"},
  {"pattern":"tē","replacement":"テー"},
  {"pattern":"to","replacement":"ト"},
  {"pattern":"tō","replacement":"トー"},
  {"pattern":"na","replacement":"ナ"},
  {"pattern":"nā","replacement":"ナー"},
  {"pattern":"ni","replacement":"ニ"},
  {"pattern":"nī","replacement":"ニー"},
  {"pattern":"nu","replacement":"ヌ"},
  {"pattern":"nū","replacement":"ヌー"},
  {"pattern":"ne","replacement":"ネ"},
  {"pattern":"nē","replacement":"ネー"},
  {"pattern":"no","replacement":"ノ"},
  {"pattern":"nō","replacement":"ノー"},
  {"pattern":"ha","replacement":"ハ"},
  {"pattern":"hā","replacement":"ハー"},
  {"pattern":"hi","replacement":"ヒ"},
  {"pattern":"hī","replacement":"ヒー"},
  {"pattern":"hu","replacement":"フ"},
  {"pattern":"hū","replacement":"フー"},
  {"pattern":"he","replacement":"ヘ"},
  {"pattern":"hē","replacement":"ヘー"},
  {"pattern":"ho","replacement":"ホ"},
  {"pattern":"hō","replacement":"ホー"},
  {"pattern":"ma","replacement":"マ"},
  {"pattern":"mā","replacement":"マー"},
  {"pattern":"mi","replacement":"ミ"},
  {"pattern":"mī","replacement":"ミー"},
  {"pattern":"mu","replacement":"ム"},
  {"pattern":"mū","replacement":"ムー"},
  {"pattern":"me","replacement":"メ"},
  {"pattern":"mē","replacement":"メー"},
  {"pattern":"mo","replacement":"モ"},
  {"pattern":"mō","replacement":"モー"},
  {"pattern":"ya","replacement":"ヤ"},
  {"pattern":"yā","replacement":"ヤー"},
  {"pattern":"yu","replacement":"ユ"},
  {"pattern":"yū","replacement":"ユー"},
  {"pattern":"yo","replacement":"ヨ"},
  {"pattern":"yō","replacement":"ヨー"},
  {"pattern":"ra","replacement":"ラ"},
  {"pattern":"rā","replacement":"ラー"},
  {"pattern":"ri","replacement":"リ"},
  {"pattern":"rī","replacement":"リー"},
  {"pattern":"ru","replacement":"ル"},
  {"pattern":"rū","replacement":"ルー"},
  {"pattern":"re","replacement":"レ"},
  {"pattern":"rē","replacement":"レー"},
  {"pattern":"ro","replacement":"ロ"},
  {"pattern":"rō","replacement":"ロー"},
  {"pattern":"wa","replacement":"ワ"},
  {"pattern":"wā","replacement":"ワー"},
  {"pattern":"wo","replacement":"ヲ"},
  {"pattern":"wō","replacement":"ヲー"},
  {"pattern":"kya","replacement":"キャ"},
  {"pattern":"kyā","replacement":"キャー"},
  {"pattern":"kyu","replacement":"キュ"},
  {"pattern":"kyū","replacement":"キュー"},
  {"pattern":"kye","replacement":"キェ"},
  {"pattern":"kyē","replacement":"キェー"},
  {"pattern":"kyo","replacement":"キョ"},
  {"pattern":"kyō","replacement":"キョー"},
  {"pattern":"gya","replacement":"ギャ"},
  {"pattern":"gyā","replacement":"ギャー"},
  {"pattern":"gyu","replacement":"ギュ"},
  {"pattern":"gyū","replacement":"ギュー"},
  {"pattern":"gye","replacement":"ギェ"},
  {"pattern":"gyē","replacement":"ギェー"},
  {"pattern":"gyo","replacement":"ギョ"},
  {"pattern":"gyō","replacement":"ギョー"},
  {"pattern":"sya","replacement":"シャ"},
  {"pattern":"syā","replacement":"シャー"},
  {"pattern":"syu","replacement":"シュ"},
  {"pattern":"syū","replacement":"シュー"},
  {"pattern":"sye","replacement":"シェ"},
  {"pattern":"syē","replacement":"シェー"},
  {"pattern":"syo","replacement":"ショ"},
  {"pattern":"syō","replacement":"ショー"},
  {"pattern":"zya","replacement":"ジャ"},
  {"pattern":"zyā","replacement":"ジャー"},
  {"pattern":"zyu","replacement":"ジュ"},
  {"pattern":"zyū","replacement":"ジュー"},
  {"pattern":"zye","replacement":"ジェ"},
  {"pattern":"zyē","replacement":"ジェー"},
  {"pattern":"zyo","replacement":"ジョ"},
  {"pattern":"zyō","replacement":"ジョー"},
  {"pattern":"tya","replacement":"チャ"},
  {"pattern":"tyā","replacement":"チャー"},
  {"pattern":"tyu","replacement":"チュ"},
  {"pattern":"tyū","replacement":"チュー"},
  {"pattern":"tye","replacement":"チェ"},
  {"pattern":"tyē","replacement":"チェー"},
  {"pattern":"tyo","replacement":"チョ"},
  {"pattern":"tyō","replacement":"チョー"},
  {"pattern":"bya","replacement":"ビャ"},
  {"pattern":"byā","replacement":"ビャー"},
  {"pattern":"byu","replacement":"ビュ"},
  {"pattern":"byū","replacement":"ビュー"},
  {"pattern":"bye","replacement":"ビェ"},
  {"pattern":"byē","replacement":"ビェー"},
  {"pattern":"byo","replacement":"ビョ"},
  {"pattern":"byō","replacement":"ビョー"},
  {"pattern":"pya","replacement":"ピャ"},
  {"pattern":"pyā","replacement":"ピャー"},
  {"pattern":"pyu","replacement":"ピュ"},
  {"pattern":"pyū","replacement":"ピュー"},
  {"pattern":"pye","replacement":"ピェ"},
  {"pattern":"pyē","replacement":"ピェー"},
  {"pattern":"pyo","replacement":"ピョ"},
  {"pattern":"pyō","replacement":"ピョー"},
  {"pattern":"mya","replacement":"ミャ"},
  {"pattern":"myā","replacement":"ミャー"},
  {"pattern":"myu","replacement":"ミュ"},
  {"pattern":"myū","replacement":"ミュー"},
  {"pattern":"mye","replacement":"ミェ"},
  {"pattern":"myē","replacement":"ミェー"},
  {"pattern":"myo","replacement":"ミョ"},
  {"pattern":"myō","replacement":"ミョー"},
  {"pattern":"rya","replacement":"リャ"},
  {"pattern":"ryā","replacement":"リャー"},
  {"pattern":"ryu","replacement":"リュ"},
  {"pattern":"ryū","replacement":"リュー"},
  {"pattern":"rye","replacement":"リェ"},
  {"pattern":"ryē","replacement":"リェー"},
  {"pattern":"ryo","replacement":"リョ"},
  {"pattern":"ryō","replacement":"リョー"},
  {"pattern":"ga","replacement":"ガ"},
  {"pattern":"gā","replacement":"ガー"},
  {"pattern":"gi","replacement":"ギ"},
  {"pattern":"gī","replacement":"ギー"},
  {"pattern":"gu","replacement":"グ"},
  {"pattern":"gū","replacement":"グー"},
  {"pattern":"ge","replacement":"ゲ"},
  {"pattern":"gē","replacement":"ゲー"},
  {"pattern":"go","replacement":"ゴ"},
  {"pattern":"gō","replacement":"ゴー"},
  {"pattern":"za","replacement":"ザ"},
  {"pattern":"zā","replacement":"ザー"},
  {"pattern":"zi","replacement":"ジ"},
  {"pattern":"zī","replacement":"ジー"},
  {"pattern":"zu","replacement":"ズ"},
  {"pattern":"zū","replacement":"ズー"},
  {"pattern":"ze","replacement":"ゼ"},
  {"pattern":"zē","replacement":"ゼー"},
  {"pattern":"zo","replacement":"ゾ"},
  {"pattern":"zō","replacement":"ゾー"},
  {"pattern":"da","replacement":"ダ"},
  {"pattern":"dā","replacement":"ダー"},
  {"pattern":"de","replacement":"デ"},
  {"pattern":"dē","replacement":"デー"},
  {"pattern":"do","replacement":"ド"},
  {"pattern":"dō","replacement":"ドー"},
  {"pattern":"ba","replacement":"バ"},
  {"pattern":"bā","replacement":"バー"},
  {"pattern":"bi","replacement":"ビ"},
  {"pattern":"bī","replacement":"ビー"},
  {"pattern":"bu","replacement":"ブ"},
  {"pattern":"bū","replacement":"ブー"},
  {"pattern":"be","replacement":"ベ"},
  {"pattern":"bē","replacement":"ベー"},
  {"pattern":"bo","replacement":"ボ"},
  {"pattern":"bō","replacement":"ボー"},
  {"pattern":"pa","replacement":"パ"},
  {"pattern":"pā","replacement":"パー"},
  {"pattern":"pi","replacement":"ピ"},
  {"pattern":"pī","replacement":"ピー"},
  {"pattern":"pu","replacement":"プ"},
  {"pattern":"pū","replacement":"プー"},
  {"pattern":"pe","replacement":"ペ"},
  {"pattern":"pē","replacement":"ペー"},
  {"pattern":"po","replacement":"ポ"},
  {"pattern":"pō","replacement":"ポー"},
  {"pattern":"kk","replacement":"ッ","next":"k"},
  {"pattern":"ss","replacement":"ッ","next":"s"},
  {"pattern":"tt","replacement":"ッ","next":"t"},
  {"pattern":"hh","replacement":"ッ","next":"h"},
  {"pattern":"mm","replacement":"ッ","next":"m"},
  {"pattern":"yy","replacement":"ッ","next":"y"},
  {"pattern":"rr","replacement":"ッ","next":"r"},
  {"pattern":"gg","replacement":"ッ","next":"g"},
  {"pattern":"zz","replacement":"ッ","next":"z"},
  {"pattern":"dd","replacement":"ッ","next":"d"},
  {"pattern":"bb","replacement":"ッ","next":"b"},
  {"pattern":"pp","replacement":"ッ","next":"p"},
  {"pattern":"nk","replacement":"ン","next":"k"},
  {"pattern":"ns","replacement":"ン","next":"s"},
  {"pattern":"nt","replacement":"ン","next":"t"},
  {"pattern":"nn","replacement":"ン","next":"n"},
  {"pattern":"nh","replacement":"ン","next":"h"},
  {"pattern":"nf","replacement":"ン","next":"f"},
  {"pattern":"nm","replacement":"ン","next":"m"},
  {"pattern":"ny","replacement":"ン","next":"y"},
  {"pattern":"nr","replacement":"ン","next":"r"},
  {"pattern":"ng","replacement":"ン","next":"g"},
  {"pattern":"nz","replacement":"ン","next":"z"},
  {"pattern":"nj","replacement":"ン","next":"j"},
  {"pattern":"nd","replacement":"ン","next":"d"},
  {"pattern":"nb","replacement":"ン","next":"b"},
  {"pattern":"np","replacement":"ン","next":"p"},
  {"pattern":"n'a","replacement":"ン","next":"a"},
  {"pattern":"n'i","replacement":"ン","next":"i"},
  {"pattern":"n'u","replacement":"ン","next":"u"},
  {"pattern":"n'e","replacement":"ン","next":"e"},
  {"pattern":"n'o","replacement":"ン","next":"o"}
]
;
const jaOldHepburnRule =
[
  {"pattern":"a","replacement":"ア"},
  {"pattern":"â","replacement":"アー"},
  {"pattern":"i","replacement":"イ"},
  {"pattern":"î","replacement":"イー"},
  {"pattern":"u","replacement":"ウ"},
  {"pattern":"û","replacement":"ウー"},
  {"pattern":"e","replacement":"エ"},
  {"pattern":"ê","replacement":"エー"},
  {"pattern":"o","replacement":"オ"},
  {"pattern":"ô","replacement":"オー"},
  {"pattern":"ka","replacement":"カ"},
  {"pattern":"kâ","replacement":"カー"},
  {"pattern":"ki","replacement":"キ"},
  {"pattern":"kî","replacement":"キー"},
  {"pattern":"ku","replacement":"ク"},
  {"pattern":"kû","replacement":"クー"},
  {"pattern":"ke","replacement":"ケ"},
  {"pattern":"kê","replacement":"ケー"},
  {"pattern":"ko","replacement":"コ"},
  {"pattern":"kô","replacement":"コー"},
  {"pattern":"sa","replacement":"サ"},
  {"pattern":"sâ","replacement":"サー"},
  {"pattern":"shi","replacement":"シ"},
  {"pattern":"shî","replacement":"シー"},
  {"pattern":"su","replacement":"ス"},
  {"pattern":"sû","replacement":"スー"},
  {"pattern":"se","replacement":"セ"},
  {"pattern":"sê","replacement":"セー"},
  {"pattern":"so","replacement":"ソ"},
  {"pattern":"sô","replacement":"ソー"},
  {"pattern":"ta","replacement":"タ"},
  {"pattern":"tâ","replacement":"ター"},
  {"pattern":"chi","replacement":"チ"},
  {"pattern":"chî","replacement":"チー"},
  {"pattern":"tsu","replacement":"ツ"},
  {"pattern":"tsû","replacement":"ツー"},
  {"pattern":"te","replacement":"テ"},
  {"pattern":"tê","replacement":"テー"},
  {"pattern":"to","replacement":"ト"},
  {"pattern":"tô","replacement":"トー"},
  {"pattern":"na","replacement":"ナ"},
  {"pattern":"nâ","replacement":"ナー"},
  {"pattern":"ni","replacement":"ニ"},
  {"pattern":"nî","replacement":"ニー"},
  {"pattern":"nu","replacement":"ヌ"},
  {"pattern":"nû","replacement":"ヌー"},
  {"pattern":"ne","replacement":"ネ"},
  {"pattern":"nê","replacement":"ネー"},
  {"pattern":"no","replacement":"ノ"},
  {"pattern":"nô","replacement":"ノー"},
  {"pattern":"ha","replacement":"ハ"},
  {"pattern":"hâ","replacement":"ハー"},
  {"pattern":"hi","replacement":"ヒ"},
  {"pattern":"hî","replacement":"ヒー"},
  {"pattern":"fu","replacement":"フ"},
  {"pattern":"fû","replacement":"フー"},
  {"pattern":"he","replacement":"ヘ"},
  {"pattern":"hê","replacement":"ヘー"},
  {"pattern":"ho","replacement":"ホ"},
  {"pattern":"hô","replacement":"ホー"},
  {"pattern":"ma","replacement":"マ"},
  {"pattern":"mâ","replacement":"マー"},
  {"pattern":"mi","replacement":"ミ"},
  {"pattern":"mî","replacement":"ミー"},
  {"pattern":"mu","replacement":"ム"},
  {"pattern":"mû","replacement":"ムー"},
  {"pattern":"me","replacement":"メ"},
  {"pattern":"mê","replacement":"メー"},
  {"pattern":"mo","replacement":"モ"},
  {"pattern":"mô","replacement":"モー"},
  {"pattern":"ya","replacement":"ヤ"},
  {"pattern":"yâ","replacement":"ヤー"},
  {"pattern":"yu","replacement":"ユ"},
  {"pattern":"yû","replacement":"ユー"},
  {"pattern":"yo","replacement":"ヨ"},
  {"pattern":"yô","replacement":"ヨー"},
  {"pattern":"ra","replacement":"ラ"},
  {"pattern":"râ","replacement":"ラー"},
  {"pattern":"ri","replacement":"リ"},
  {"pattern":"rî","replacement":"リー"},
  {"pattern":"ru","replacement":"ル"},
  {"pattern":"rû","replacement":"ルー"},
  {"pattern":"re","replacement":"レ"},
  {"pattern":"rê","replacement":"レー"},
  {"pattern":"ro","replacement":"ロ"},
  {"pattern":"rô","replacement":"ロー"},
  {"pattern":"wa","replacement":"ワ"},
  {"pattern":"wâ","replacement":"ワー"},
  {"pattern":"wo","replacement":"ヲ"},
  {"pattern":"wô","replacement":"ヲー"},
  {"pattern":"kya","replacement":"キャ"},
  {"pattern":"kyâ","replacement":"キャー"},
  {"pattern":"kyu","replacement":"キュ"},
  {"pattern":"kyû","replacement":"キュー"},
  {"pattern":"kye","replacement":"キェ"},
  {"pattern":"kyê","replacement":"キェー"},
  {"pattern":"kyo","replacement":"キョ"},
  {"pattern":"kyô","replacement":"キョー"},
  {"pattern":"gya","replacement":"ギャ"},
  {"pattern":"gyâ","replacement":"ギャー"},
  {"pattern":"gyu","replacement":"ギュ"},
  {"pattern":"gyû","replacement":"ギュー"},
  {"pattern":"gye","replacement":"ギェ"},
  {"pattern":"gyê","replacement":"ギェー"},
  {"pattern":"gyo","replacement":"ギョ"},
  {"pattern":"gyô","replacement":"ギョー"},
  {"pattern":"sha","replacement":"シャ"},
  {"pattern":"shâ","replacement":"シャー"},
  {"pattern":"shu","replacement":"シュ"},
  {"pattern":"shû","replacement":"シュー"},
  {"pattern":"she","replacement":"シェ"},
  {"pattern":"shê","replacement":"シェー"},
  {"pattern":"sho","replacement":"ショ"},
  {"pattern":"shô","replacement":"ショー"},
  {"pattern":"ja","replacement":"ジャ"},
  {"pattern":"jâ","replacement":"ジャー"},
  {"pattern":"ju","replacement":"ジュ"},
  {"pattern":"jû","replacement":"ジュー"},
  {"pattern":"je","replacement":"ジェ"},
  {"pattern":"jê","replacement":"ジェー"},
  {"pattern":"jo","replacement":"ジョ"},
  {"pattern":"jô","replacement":"ジョー"},
  {"pattern":"cha","replacement":"チャ"},
  {"pattern":"châ","replacement":"チャー"},
  {"pattern":"chu","replacement":"チュ"},
  {"pattern":"chû","replacement":"チュー"},
  {"pattern":"che","replacement":"チェ"},
  {"pattern":"chê","replacement":"チェー"},
  {"pattern":"cho","replacement":"チョ"},
  {"pattern":"chô","replacement":"チョー"},
  {"pattern":"bya","replacement":"ビャ"},
  {"pattern":"byâ","replacement":"ビャー"},
  {"pattern":"byu","replacement":"ビュ"},
  {"pattern":"byû","replacement":"ビュー"},
  {"pattern":"bye","replacement":"ビェ"},
  {"pattern":"byê","replacement":"ビェー"},
  {"pattern":"byo","replacement":"ビョ"},
  {"pattern":"byô","replacement":"ビョー"},
  {"pattern":"pya","replacement":"ピャ"},
  {"pattern":"pyâ","replacement":"ピャー"},
  {"pattern":"pyu","replacement":"ピュ"},
  {"pattern":"pyû","replacement":"ピュー"},
  {"pattern":"pye","replacement":"ピェ"},
  {"pattern":"pyê","replacement":"ピェー"},
  {"pattern":"pyo","replacement":"ピョ"},
  {"pattern":"pyô","replacement":"ピョー"},
  {"pattern":"mya","replacement":"ミャ"},
  {"pattern":"myâ","replacement":"ミャー"},
  {"pattern":"myu","replacement":"ミュ"},
  {"pattern":"myû","replacement":"ミュー"},
  {"pattern":"mye","replacement":"ミェ"},
  {"pattern":"myê","replacement":"ミェー"},
  {"pattern":"myo","replacement":"ミョ"},
  {"pattern":"myô","replacement":"ミョー"},
  {"pattern":"rya","replacement":"リャ"},
  {"pattern":"ryâ","replacement":"リャー"},
  {"pattern":"ryu","replacement":"リュ"},
  {"pattern":"ryû","replacement":"リュー"},
  {"pattern":"rye","replacement":"リェ"},
  {"pattern":"ryê","replacement":"リェー"},
  {"pattern":"ryo","replacement":"リョ"},
  {"pattern":"ryô","replacement":"リョー"},
  {"pattern":"ga","replacement":"ガ"},
  {"pattern":"gâ","replacement":"ガー"},
  {"pattern":"gi","replacement":"ギ"},
  {"pattern":"gî","replacement":"ギー"},
  {"pattern":"gu","replacement":"グ"},
  {"pattern":"gû","replacement":"グー"},
  {"pattern":"ge","replacement":"ゲ"},
  {"pattern":"gê","replacement":"ゲー"},
  {"pattern":"go","replacement":"ゴ"},
  {"pattern":"gô","replacement":"ゴー"},
  {"pattern":"za","replacement":"ザ"},
  {"pattern":"zâ","replacement":"ザー"},
  {"pattern":"ji","replacement":"ジ"},
  {"pattern":"jî","replacement":"ジー"},
  {"pattern":"zu","replacement":"ズ"},
  {"pattern":"zû","replacement":"ズー"},
  {"pattern":"ze","replacement":"ゼ"},
  {"pattern":"zê","replacement":"ゼー"},
  {"pattern":"zo","replacement":"ゾ"},
  {"pattern":"zô","replacement":"ゾー"},
  {"pattern":"da","replacement":"ダ"},
  {"pattern":"dâ","replacement":"ダー"},
  {"pattern":"de","replacement":"デ"},
  {"pattern":"dê","replacement":"デー"},
  {"pattern":"do","replacement":"ド"},
  {"pattern":"dô","replacement":"ドー"},
  {"pattern":"ba","replacement":"バ"},
  {"pattern":"bâ","replacement":"バー"},
  {"pattern":"bi","replacement":"ビ"},
  {"pattern":"bî","replacement":"ビー"},
  {"pattern":"bu","replacement":"ブ"},
  {"pattern":"bû","replacement":"ブー"},
  {"pattern":"be","replacement":"ベ"},
  {"pattern":"bê","replacement":"ベー"},
  {"pattern":"bo","replacement":"ボ"},
  {"pattern":"bô","replacement":"ボー"},
  {"pattern":"pa","replacement":"パ"},
  {"pattern":"pâ","replacement":"パー"},
  {"pattern":"pi","replacement":"ピ"},
  {"pattern":"pî","replacement":"ピー"},
  {"pattern":"pu","replacement":"プ"},
  {"pattern":"pû","replacement":"プー"},
  {"pattern":"pe","replacement":"ペ"},
  {"pattern":"pê","replacement":"ペー"},
  {"pattern":"po","replacement":"ポ"},
  {"pattern":"pô","replacement":"ポー"},
  {"pattern":"kk","replacement":"ッ","next":"k"},
  {"pattern":"ss","replacement":"ッ","next":"s"},
  {"pattern":"tt","replacement":"ッ","next":"t"},
  {"pattern":"hh","replacement":"ッ","next":"h"},
  {"pattern":"ff","replacement":"ッ","next":"f"},
  {"pattern":"mm","replacement":"ッ","next":"m"},
  {"pattern":"yy","replacement":"ッ","next":"y"},
  {"pattern":"rr","replacement":"ッ","next":"r"},
  {"pattern":"gg","replacement":"ッ","next":"g"},
  {"pattern":"zz","replacement":"ッ","next":"z"},
  {"pattern":"jj","replacement":"ッ","next":"j"},
  {"pattern":"dd","replacement":"ッ","next":"d"},
  {"pattern":"bb","replacement":"ッ","next":"b"},
  {"pattern":"pp","replacement":"ッ","next":"p"},
  {"pattern":"tch","replacement":"ッ","next":"ch"},
  {"pattern":"nk","replacement":"ン","next":"k"},
  {"pattern":"ns","replacement":"ン","next":"s"},
  {"pattern":"nt","replacement":"ン","next":"t"},
  {"pattern":"nn","replacement":"ン","next":"n"},
  {"pattern":"nh","replacement":"ン","next":"h"},
  {"pattern":"nf","replacement":"ン","next":"f"},
  {"pattern":"ny","replacement":"ン","next":"y"},
  {"pattern":"nr","replacement":"ン","next":"r"},
  {"pattern":"ng","replacement":"ン","next":"g"},
  {"pattern":"nz","replacement":"ン","next":"z"},
  {"pattern":"nj","replacement":"ン","next":"j"},
  {"pattern":"nd","replacement":"ン","next":"d"},
  {"pattern":"n-a","replacement":"ン","next":"a"},
  {"pattern":"n-i","replacement":"ン","next":"i"},
  {"pattern":"n-u","replacement":"ン","next":"u"},
  {"pattern":"n-e","replacement":"ン","next":"e"},
  {"pattern":"n-o","replacement":"ン","next":"o"},
  {"pattern":"mb","replacement":"ン","next":"b"},
  {"pattern":"mm","replacement":"ン","next":"m"},
  {"pattern":"mp","replacement":"ン","next":"p"}
]
;
const jaWaapuroHepburnRule =
[
  {"pattern":"-","replacement":"ー"},
  {"pattern":"a","replacement":"ア"},
  {"pattern":"i","replacement":"イ"},
  {"pattern":"u","replacement":"ウ"},
  {"pattern":"e","replacement":"エ"},
  {"pattern":"o","replacement":"オ"},
  {"pattern":"ka","replacement":"カ"},
  {"pattern":"ki","replacement":"キ"},
  {"pattern":"ku","replacement":"ク"},
  {"pattern":"ke","replacement":"ケ"},
  {"pattern":"ko","replacement":"コ"},
  {"pattern":"sa","replacement":"サ"},
  {"pattern":"shi","replacement":"シ"},
  {"pattern":"su","replacement":"ス"},
  {"pattern":"se","replacement":"セ"},
  {"pattern":"so","replacement":"ソ"},
  {"pattern":"ta","replacement":"タ"},
  {"pattern":"chi","replacement":"チ"},
  {"pattern":"tsu","replacement":"ツ"},
  {"pattern":"te","replacement":"テ"},
  {"pattern":"to","replacement":"ト"},
  {"pattern":"na","replacement":"ナ"},
  {"pattern":"ni","replacement":"ニ"},
  {"pattern":"nu","replacement":"ヌ"},
  {"pattern":"ne","replacement":"ネ"},
  {"pattern":"no","replacement":"ノ"},
  {"pattern":"ha","replacement":"ハ"},
  {"pattern":"hi","replacement":"ヒ"},
  {"pattern":"fu","replacement":"フ"},
  {"pattern":"he","replacement":"ヘ"},
  {"pattern":"ho","replacement":"ホ"},
  {"pattern":"ma","replacement":"マ"},
  {"pattern":"mi","replacement":"ミ"},
  {"pattern":"mu","replacement":"ム"},
  {"pattern":"me","replacement":"メ"},
  {"pattern":"mo","replacement":"モ"},
  {"pattern":"ya","replacement":"ヤ"},
  {"pattern":"yu","replacement":"ユ"},
  {"pattern":"yo","replacement":"ヨ"},
  {"pattern":"ra","replacement":"ラ"},
  {"pattern":"ri","replacement":"リ"},
  {"pattern":"ru","replacement":"ル"},
  {"pattern":"re","replacement":"レ"},
  {"pattern":"ro","replacement":"ロ"},
  {"pattern":"wa","replacement":"ワ"},
  {"pattern":"wo","replacement":"ヲ"},
  {"pattern":"nn","replacement":"ン"},
  {"pattern":"n","replacement":"ン"},
  {"pattern":"kya","replacement":"キャ"},
  {"pattern":"kyu","replacement":"キュ"},
  {"pattern":"kye","replacement":"キェ"},
  {"pattern":"kyo","replacement":"キョ"},
  {"pattern":"gya","replacement":"ギャ"},
  {"pattern":"gyu","replacement":"ギュ"},
  {"pattern":"gye","replacement":"ギェ"},
  {"pattern":"gyo","replacement":"ギョ"},
  {"pattern":"sha","replacement":"シャ"},
  {"pattern":"shu","replacement":"シュ"},
  {"pattern":"she","replacement":"シェ"},
  {"pattern":"sho","replacement":"ショ"},
  {"pattern":"ja","replacement":"ジャ"},
  {"pattern":"ju","replacement":"ジュ"},
  {"pattern":"je","replacement":"ジェ"},
  {"pattern":"jo","replacement":"ジョ"},
  {"pattern":"cha","replacement":"チャ"},
  {"pattern":"chu","replacement":"チュ"},
  {"pattern":"che","replacement":"チェ"},
  {"pattern":"cho","replacement":"チョ"},
  {"pattern":"bya","replacement":"ビャ"},
  {"pattern":"byu","replacement":"ビュ"},
  {"pattern":"bye","replacement":"ビェ"},
  {"pattern":"byo","replacement":"ビョ"},
  {"pattern":"pya","replacement":"ピャ"},
  {"pattern":"pyu","replacement":"ピュ"},
  {"pattern":"pye","replacement":"ピェ"},
  {"pattern":"pyo","replacement":"ピョ"},
  {"pattern":"mya","replacement":"ミャ"},
  {"pattern":"myu","replacement":"ミュ"},
  {"pattern":"mye","replacement":"ミェ"},
  {"pattern":"myo","replacement":"ミョ"},
  {"pattern":"rya","replacement":"リャ"},
  {"pattern":"ryu","replacement":"リュ"},
  {"pattern":"rye","replacement":"リェ"},
  {"pattern":"ryo","replacement":"リョ"},
  {"pattern":"ga","replacement":"ガ"},
  {"pattern":"gi","replacement":"ギ"},
  {"pattern":"gu","replacement":"グ"},
  {"pattern":"ge","replacement":"ゲ"},
  {"pattern":"go","replacement":"ゴ"},
  {"pattern":"za","replacement":"ザ"},
  {"pattern":"ji","replacement":"ジ"},
  {"pattern":"zu","replacement":"ズ"},
  {"pattern":"ze","replacement":"ゼ"},
  {"pattern":"zo","replacement":"ゾ"},
  {"pattern":"da","replacement":"ダ"},
  {"pattern":"de","replacement":"デ"},
  {"pattern":"do","replacement":"ド"},
  {"pattern":"ba","replacement":"バ"},
  {"pattern":"bi","replacement":"ビ"},
  {"pattern":"bu","replacement":"ブ"},
  {"pattern":"be","replacement":"ベ"},
  {"pattern":"bo","replacement":"ボ"},
  {"pattern":"pa","replacement":"パ"},
  {"pattern":"pi","replacement":"ピ"},
  {"pattern":"pu","replacement":"プ"},
  {"pattern":"pe","replacement":"ペ"},
  {"pattern":"po","replacement":"ポ"},
  {"pattern":"kk","replacement":"ッ","next":"k"},
  {"pattern":"ss","replacement":"ッ","next":"s"},
  {"pattern":"tt","replacement":"ッ","next":"t"},
  {"pattern":"hh","replacement":"ッ","next":"h"},
  {"pattern":"ff","replacement":"ッ","next":"f"},
  {"pattern":"mm","replacement":"ッ","next":"m"},
  {"pattern":"yy","replacement":"ッ","next":"y"},
  {"pattern":"rr","replacement":"ッ","next":"r"},
  {"pattern":"gg","replacement":"ッ","next":"g"},
  {"pattern":"zz","replacement":"ッ","next":"z"},
  {"pattern":"jj","replacement":"ッ","next":"j"},
  {"pattern":"dd","replacement":"ッ","next":"d"},
  {"pattern":"bb","replacement":"ッ","next":"b"},
  {"pattern":"pp","replacement":"ッ","next":"p"},
  {"pattern":"tch","replacement":"ッ","next":"ch"}
]
;
const jaWaapuroKunreiRule =
[
  {"pattern":"-","replacement":"ー"},
  {"pattern":"a","replacement":"ア"},
  {"pattern":"i","replacement":"イ"},
  {"pattern":"u","replacement":"ウ"},
  {"pattern":"e","replacement":"エ"},
  {"pattern":"o","replacement":"オ"},
  {"pattern":"ka","replacement":"カ"},
  {"pattern":"ki","replacement":"キ"},
  {"pattern":"ku","replacement":"ク"},
  {"pattern":"ke","replacement":"ケ"},
  {"pattern":"ko","replacement":"コ"},
  {"pattern":"sa","replacement":"サ"},
  {"pattern":"si","replacement":"シ"},
  {"pattern":"su","replacement":"ス"},
  {"pattern":"se","replacement":"セ"},
  {"pattern":"so","replacement":"ソ"},
  {"pattern":"ta","replacement":"タ"},
  {"pattern":"ti","replacement":"チ"},
  {"pattern":"tu","replacement":"ツ"},
  {"pattern":"te","replacement":"テ"},
  {"pattern":"to","replacement":"ト"},
  {"pattern":"na","replacement":"ナ"},
  {"pattern":"ni","replacement":"ニ"},
  {"pattern":"nu","replacement":"ヌ"},
  {"pattern":"ne","replacement":"ネ"},
  {"pattern":"no","replacement":"ノ"},
  {"pattern":"ha","replacement":"ハ"},
  {"pattern":"hi","replacement":"ヒ"},
  {"pattern":"hu","replacement":"フ"},
  {"pattern":"he","replacement":"ヘ"},
  {"pattern":"ho","replacement":"ホ"},
  {"pattern":"ma","replacement":"マ"},
  {"pattern":"mi","replacement":"ミ"},
  {"pattern":"mu","replacement":"ム"},
  {"pattern":"me","replacement":"メ"},
  {"pattern":"mo","replacement":"モ"},
  {"pattern":"ya","replacement":"ヤ"},
  {"pattern":"yu","replacement":"ユ"},
  {"pattern":"yo","replacement":"ヨ"},
  {"pattern":"ra","replacement":"ラ"},
  {"pattern":"ri","replacement":"リ"},
  {"pattern":"ru","replacement":"ル"},
  {"pattern":"re","replacement":"レ"},
  {"pattern":"ro","replacement":"ロ"},
  {"pattern":"wa","replacement":"ワ"},
  {"pattern":"wo","replacement":"ヲ"},
  {"pattern":"nn","replacement":"ン"},
  {"pattern":"n","replacement":"ン"},
  {"pattern":"kya","replacement":"キャ"},
  {"pattern":"kyu","replacement":"キュ"},
  {"pattern":"kye","replacement":"キェ"},
  {"pattern":"kyo","replacement":"キョ"},
  {"pattern":"gya","replacement":"ギャ"},
  {"pattern":"gyu","replacement":"ギュ"},
  {"pattern":"gye","replacement":"ギェ"},
  {"pattern":"gyo","replacement":"ギョ"},
  {"pattern":"sya","replacement":"シャ"},
  {"pattern":"syu","replacement":"シュ"},
  {"pattern":"sye","replacement":"シェ"},
  {"pattern":"syo","replacement":"ショ"},
  {"pattern":"zya","replacement":"ジャ"},
  {"pattern":"zyu","replacement":"ジュ"},
  {"pattern":"zye","replacement":"ジェ"},
  {"pattern":"zyo","replacement":"ジョ"},
  {"pattern":"tya","replacement":"チャ"},
  {"pattern":"tyu","replacement":"チュ"},
  {"pattern":"tye","replacement":"チェ"},
  {"pattern":"tyo","replacement":"チョ"},
  {"pattern":"bya","replacement":"ビャ"},
  {"pattern":"byu","replacement":"ビュ"},
  {"pattern":"bye","replacement":"ビェ"},
  {"pattern":"byo","replacement":"ビョ"},
  {"pattern":"pya","replacement":"ピャ"},
  {"pattern":"pyu","replacement":"ピュ"},
  {"pattern":"pye","replacement":"ピェ"},
  {"pattern":"pyo","replacement":"ピョ"},
  {"pattern":"mya","replacement":"ミャ"},
  {"pattern":"myu","replacement":"ミュ"},
  {"pattern":"mye","replacement":"ミェ"},
  {"pattern":"myo","replacement":"ミョ"},
  {"pattern":"rya","replacement":"リャ"},
  {"pattern":"ryu","replacement":"リュ"},
  {"pattern":"rye","replacement":"リェ"},
  {"pattern":"ryo","replacement":"リョ"},
  {"pattern":"ga","replacement":"ガ"},
  {"pattern":"gi","replacement":"ギ"},
  {"pattern":"gu","replacement":"グ"},
  {"pattern":"ge","replacement":"ゲ"},
  {"pattern":"go","replacement":"ゴ"},
  {"pattern":"za","replacement":"ザ"},
  {"pattern":"zi","replacement":"ジ"},
  {"pattern":"zu","replacement":"ズ"},
  {"pattern":"ze","replacement":"ゼ"},
  {"pattern":"zo","replacement":"ゾ"},
  {"pattern":"da","replacement":"ダ"},
  {"pattern":"de","replacement":"デ"},
  {"pattern":"do","replacement":"ド"},
  {"pattern":"ba","replacement":"バ"},
  {"pattern":"bi","replacement":"ビ"},
  {"pattern":"bu","replacement":"ブ"},
  {"pattern":"be","replacement":"ベ"},
  {"pattern":"bo","replacement":"ボ"},
  {"pattern":"pa","replacement":"パ"},
  {"pattern":"pi","replacement":"ピ"},
  {"pattern":"pu","replacement":"プ"},
  {"pattern":"pe","replacement":"ペ"},
  {"pattern":"po","replacement":"ポ"},
  {"pattern":"kk","replacement":"ッ","next":"k"},
  {"pattern":"ss","replacement":"ッ","next":"s"},
  {"pattern":"tt","replacement":"ッ","next":"t"},
  {"pattern":"hh","replacement":"ッ","next":"h"},
  {"pattern":"mm","replacement":"ッ","next":"m"},
  {"pattern":"yy","replacement":"ッ","next":"y"},
  {"pattern":"rr","replacement":"ッ","next":"r"},
  {"pattern":"gg","replacement":"ッ","next":"g"},
  {"pattern":"zz","replacement":"ッ","next":"z"},
  {"pattern":"dd","replacement":"ッ","next":"d"},
  {"pattern":"bb","replacement":"ッ","next":"b"},
  {"pattern":"pp","replacement":"ッ","next":"p"}
]
;
const jaWaapuroKunreiJoudaiRule =
[
  {"pattern":"ki1","replacement":"𛀦"},
  {"pattern":"ki2","replacement":"𛀥"},
  {"pattern":"hi1","replacement":"𛂪"},
  {"pattern":"hi2","replacement":"𛂯"},
  {"pattern":"mi1","replacement":"𛃉"},
  {"pattern":"mi2","replacement":"𛃏"},
  {"pattern":"gi1","replacement":"𛀦゙"},
  {"pattern":"gi2","replacement":"𛀥゙"},
  {"pattern":"bi1","replacement":"𛂪゙"},
  {"pattern":"bi2","replacement":"𛂯゙"},
  {"pattern":"pi1","replacement":"𛂪゚"},
  {"pattern":"pi2","replacement":"𛂯゚"},
  {"pattern":"ke1","replacement":"𛀳"},
  {"pattern":"ke2","replacement":"𛀴"},
  {"pattern":"he1","replacement":"𛂶"},
  {"pattern":"he2","replacement":"𛂳"},
  {"pattern":"me1","replacement":"𛃕"},
  {"pattern":"me2","replacement":"𛃔"},
  {"pattern":"ge1","replacement":"𛀳゙"},
  {"pattern":"ge2","replacement":"𛀴゙"},
  {"pattern":"be1","replacement":"𛂶゙"},
  {"pattern":"be2","replacement":"𛂳゙"},
  {"pattern":"pe1","replacement":"𛂶゚"},
  {"pattern":"pe2","replacement":"𛂳゚"},
  {"pattern":"ko1","replacement":"𛀸"},
  {"pattern":"ko2","replacement":"𛀺"},
  {"pattern":"so1","replacement":"𛁜"},
  {"pattern":"so2","replacement":"𛁚"},
  {"pattern":"to1","replacement":"𛁭"},
  {"pattern":"to2","replacement":"𛁻"},
  {"pattern":"no1","replacement":"𛂑"},
  {"pattern":"no2","replacement":"𛂙"},
  {"pattern":"mo1","replacement":"𛃙"},
  {"pattern":"mo2","replacement":"𛃗"},
  {"pattern":"yo1","replacement":"𛃢"},
  {"pattern":"yo2","replacement":"𛃫"},
  {"pattern":"ro1","replacement":"𛄆"},
  {"pattern":"ro2","replacement":"𛄂"},
  {"pattern":"go1","replacement":"𛀸゙"},
  {"pattern":"go2","replacement":"𛀺゙"},
  {"pattern":"zo1","replacement":"𛁜゙"},
  {"pattern":"zo2","replacement":"𛁚゙"},
  {"pattern":"do1","replacement":"𛁭゙"},
  {"pattern":"do2","replacement":"𛁻゙"},
  {"pattern":"-","replacement":"ー"},
  {"pattern":"a","replacement":"あ"},
  {"pattern":"i","replacement":"い"},
  {"pattern":"u","replacement":"う"},
  {"pattern":"e","replacement":"え"},
  {"pattern":"o","replacement":"お"},
  {"pattern":"ka","replacement":"か"},
  {"pattern":"ki","replacement":"き"},
  {"pattern":"ku","replacement":"く"},
  {"pattern":"ke","replacement":"け"},
  {"pattern":"ko","replacement":"こ"},
  {"pattern":"sa","replacement":"さ"},
  {"pattern":"si","replacement":"し"},
  {"pattern":"su","replacement":"す"},
  {"pattern":"se","replacement":"せ"},
  {"pattern":"so","replacement":"そ"},
  {"pattern":"ta","replacement":"た"},
  {"pattern":"ti","replacement":"ち"},
  {"pattern":"tu","replacement":"つ"},
  {"pattern":"te","replacement":"て"},
  {"pattern":"to","replacement":"と"},
  {"pattern":"na","replacement":"な"},
  {"pattern":"ni","replacement":"に"},
  {"pattern":"nu","replacement":"ぬ"},
  {"pattern":"ne","replacement":"ね"},
  {"pattern":"no","replacement":"の"},
  {"pattern":"ha","replacement":"は"},
  {"pattern":"hi","replacement":"ひ"},
  {"pattern":"hu","replacement":"ふ"},
  {"pattern":"he","replacement":"へ"},
  {"pattern":"ho","replacement":"ほ"},
  {"pattern":"ma","replacement":"ま"},
  {"pattern":"mi","replacement":"み"},
  {"pattern":"mu","replacement":"む"},
  {"pattern":"me","replacement":"め"},
  {"pattern":"mo","replacement":"も"},
  {"pattern":"ya","replacement":"や"},
  {"pattern":"yu","replacement":"ゆ"},
  {"pattern":"ye","replacement":"𛀁"},
  {"pattern":"yo","replacement":"よ"},
  {"pattern":"ra","replacement":"ら"},
  {"pattern":"ri","replacement":"り"},
  {"pattern":"ru","replacement":"る"},
  {"pattern":"re","replacement":"れ"},
  {"pattern":"ro","replacement":"ろ"},
  {"pattern":"wa","replacement":"わ"},
  {"pattern":"wi","replacement":"ゐ"},
  {"pattern":"we","replacement":"ゑ"},
  {"pattern":"wo","replacement":"を"},
  {"pattern":"nn","replacement":"ん"},
  {"pattern":"n","replacement":"ん"},
  {"pattern":"kya","replacement":"きゃ"},
  {"pattern":"kyu","replacement":"きゅ"},
  {"pattern":"kye","replacement":"きぇ"},
  {"pattern":"kyo","replacement":"きょ"},
  {"pattern":"gya","replacement":"ぎゃ"},
  {"pattern":"gyu","replacement":"ぎゅ"},
  {"pattern":"gye","replacement":"ぎぇ"},
  {"pattern":"gyo","replacement":"ぎょ"},
  {"pattern":"sya","replacement":"しゃ"},
  {"pattern":"syu","replacement":"しゅ"},
  {"pattern":"sye","replacement":"しぇ"},
  {"pattern":"syo","replacement":"しょ"},
  {"pattern":"zya","replacement":"じゃ"},
  {"pattern":"zyu","replacement":"じゅ"},
  {"pattern":"zye","replacement":"じぇ"},
  {"pattern":"zyo","replacement":"じょ"},
  {"pattern":"tya","replacement":"ちゃ"},
  {"pattern":"tyu","replacement":"ちゅ"},
  {"pattern":"tye","replacement":"ちぇ"},
  {"pattern":"tyo","replacement":"ちょ"},
  {"pattern":"bya","replacement":"びゃ"},
  {"pattern":"byu","replacement":"びゅ"},
  {"pattern":"bye","replacement":"びぇ"},
  {"pattern":"byo","replacement":"びょ"},
  {"pattern":"pya","replacement":"ぴゃ"},
  {"pattern":"pyu","replacement":"ぴゅ"},
  {"pattern":"pye","replacement":"ぴぇ"},
  {"pattern":"pyo","replacement":"ぴょ"},
  {"pattern":"mya","replacement":"みゃ"},
  {"pattern":"myu","replacement":"みゅ"},
  {"pattern":"mye","replacement":"みぇ"},
  {"pattern":"myo","replacement":"みょ"},
  {"pattern":"rya","replacement":"りゃ"},
  {"pattern":"ryu","replacement":"りゅ"},
  {"pattern":"rye","replacement":"りぇ"},
  {"pattern":"ryo","replacement":"りょ"},
  {"pattern":"ga","replacement":"が"},
  {"pattern":"gi","replacement":"ぎ"},
  {"pattern":"gu","replacement":"ぐ"},
  {"pattern":"ge","replacement":"げ"},
  {"pattern":"go","replacement":"ご"},
  {"pattern":"za","replacement":"ざ"},
  {"pattern":"zi","replacement":"じ"},
  {"pattern":"zu","replacement":"ず"},
  {"pattern":"ze","replacement":"ぜ"},
  {"pattern":"zo","replacement":"ぞ"},
  {"pattern":"da","replacement":"だ"},
  {"pattern":"de","replacement":"で"},
  {"pattern":"do","replacement":"ど"},
  {"pattern":"ba","replacement":"ば"},
  {"pattern":"bi","replacement":"び"},
  {"pattern":"bu","replacement":"ぶ"},
  {"pattern":"be","replacement":"べ"},
  {"pattern":"bo","replacement":"ぼ"},
  {"pattern":"pa","replacement":"ぱ"},
  {"pattern":"pi","replacement":"ぴ"},
  {"pattern":"pu","replacement":"ぷ"},
  {"pattern":"pe","replacement":"ぺ"},
  {"pattern":"po","replacement":"ぽ"},
  {"pattern":"kk","replacement":"っ","next":"k"},
  {"pattern":"ss","replacement":"っ","next":"s"},
  {"pattern":"tt","replacement":"っ","next":"t"},
  {"pattern":"hh","replacement":"っ","next":"h"},
  {"pattern":"mm","replacement":"っ","next":"m"},
  {"pattern":"yy","replacement":"っ","next":"y"},
  {"pattern":"rr","replacement":"っ","next":"r"},
  {"pattern":"gg","replacement":"っ","next":"g"},
  {"pattern":"zz","replacement":"っ","next":"z"},
  {"pattern":"dd","replacement":"っ","next":"d"},
  {"pattern":"bb","replacement":"っ","next":"b"},
  {"pattern":"pp","replacement":"っ","next":"p"}
]
;
